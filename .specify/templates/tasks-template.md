---

description: "功能实现任务列表模板"
---

# 任务: [FEATURE NAME]

**输入**: 来自 `/specs/[###-feature-name]/` 的设计文档
**前置条件**: plan.md（必需）、spec.md（用户故事必需）、research.md、data-model.md、contracts/

**测试**: 下述示例包含测试任务。测试为可选，仅在功能规范明确要求时添加。

**组织方式**: 任务按用户故事分组，确保每个故事可独立实现与测试。

## 格式: `[ID] [P?] [Story] 描述`

- **[P]**: 可并行（不同文件，无依赖）
- **[Story]**: 任务归属的用户故事（例如 US1, US2, US3）
- 描述中包含准确文件路径

## 路径约定

- **单体项目**: `src/`, `tests/` 位于仓库根目录
- **Web 应用**: `backend/src/`, `frontend/src/`
- **移动端**: `api/src/`, `ios/src/` 或 `android/src/`
- 下述路径以单体项目为例，需根据 plan.md 进行调整

<!-- 
  ============================================================================
  重要：下方任务仅为示例，必须由 /speckit.tasks 根据真实上下文替换。

  /speckit.tasks 必须基于以下内容生成实际任务：
  - spec.md 中的用户故事（含优先级 P1, P2, P3...）
  - plan.md 中的功能需求
  - data-model.md 中的实体
  - contracts/ 中的接口

  任务必须按用户故事分组，确保每个故事可：
  - 独立实现
  - 独立测试
  - 独立交付

  不得保留示例任务。
  ============================================================================
-->

## 阶段 1：初始化（共享基础）

**目的**: 项目初始化与基础结构搭建

- [ ] T001 按计划创建项目结构
- [ ] T002 初始化 [语言] 项目与 [框架] 依赖
- [ ] T003 [P] 配置 lint 与格式化工具

---

## 阶段 2：基础设施（阻塞前置）

**目的**: 任何用户故事实现前必须完成的核心基础

**⚠️ 关键**: 此阶段未完成前不得开始用户故事实现

基础任务示例（按实际项目调整）：

- [ ] T004 设置数据库 schema 与迁移框架
- [ ] T005 [P] 实现认证/授权框架
- [ ] T006 [P] 设置 API 路由与中间件结构
- [ ] T007 创建所有故事依赖的基础模型/实体
- [ ] T008 配置错误处理与日志
- [ ] T009 设置环境配置管理

**检查点**: 基础设施完成，用户故事可并行开始

---

## 阶段 3：用户故事 1 - [标题]（优先级: P1）MVP（最小可行产品）

**目标**: [此故事交付的功能摘要]

**独立测试**: [如何独立验证此故事]

### 用户故事 1 的测试（可选 - 仅在规范要求时）⚠️

> **注意：若包含测试，必须先写并确认失败**

- [ ] T010 [P] [US1] 在 tests/contract/test_[name].py 为 [endpoint] 编写契约测试
- [ ] T011 [P] [US1] 在 tests/integration/test_[name].py 为 [用户旅程] 编写集成测试

### 用户故事 1 的实现

- [ ] T012 [P] [US1] 在 src/models/[entity1].py 创建 [Entity1] 模型
- [ ] T013 [P] [US1] 在 src/models/[entity2].py 创建 [Entity2] 模型
- [ ] T014 [US1] 在 src/services/[service].py 实现 [Service]（依赖 T012, T013）
- [ ] T015 [US1] 在 src/[location]/[file].py 实现 [endpoint/feature]
- [ ] T016 [US1] 增加校验与错误处理
- [ ] T017 [US1] 为用户故事 1 的关键操作添加日志

**检查点**: 用户故事 1 应完整可用且可独立验证

---

## 阶段 4：用户故事 2 - [标题]（优先级: P2）

**目标**: [此故事交付的功能摘要]

**独立测试**: [如何独立验证此故事]

### 用户故事 2 的测试（可选 - 仅在规范要求时）⚠️

- [ ] T018 [P] [US2] 在 tests/contract/test_[name].py 为 [endpoint] 编写契约测试
- [ ] T019 [P] [US2] 在 tests/integration/test_[name].py 为 [用户旅程] 编写集成测试

### 用户故事 2 的实现

- [ ] T020 [P] [US2] 在 src/models/[entity].py 创建 [Entity] 模型
- [ ] T021 [US2] 在 src/services/[service].py 实现 [Service]
- [ ] T022 [US2] 在 src/[location]/[file].py 实现 [endpoint/feature]
- [ ] T023 [US2] 与用户故事 1 组件集成（如有需要）

**检查点**: 用户故事 1 与 2 均可独立运行

---

## 阶段 5：用户故事 3 - [标题]（优先级: P3）

**目标**: [此故事交付的功能摘要]

**独立测试**: [如何独立验证此故事]

### 用户故事 3 的测试（可选 - 仅在规范要求时）⚠️

- [ ] T024 [P] [US3] 在 tests/contract/test_[name].py 为 [endpoint] 编写契约测试
- [ ] T025 [P] [US3] 在 tests/integration/test_[name].py 为 [用户旅程] 编写集成测试

### 用户故事 3 的实现

- [ ] T026 [P] [US3] 在 src/models/[entity].py 创建 [Entity] 模型
- [ ] T027 [US3] 在 src/services/[service].py 实现 [Service]
- [ ] T028 [US3] 在 src/[location]/[file].py 实现 [endpoint/feature]

**检查点**: 所有用户故事均应可独立运行

---

[按需添加更多用户故事阶段，遵循相同结构]

---

## 阶段 N：打磨与横切关注点

**目的**: 影响多个用户故事的改进

- [ ] TXXX [P] 在 docs/ 中更新文档
- [ ] TXXX 代码清理与重构
- [ ] TXXX 性能优化（跨故事）
- [ ] TXXX [P] 在 tests/unit/ 中添加单元测试（如要求）
- [ ] TXXX 安全加固
- [ ] TXXX 运行 quickstart.md 验证

---

## 依赖与执行顺序

### 阶段依赖

- **初始化（阶段 1）**: 无依赖，可立即开始
- **基础设施（阶段 2）**: 依赖阶段 1 完成 - 阻塞所有用户故事
- **用户故事（阶段 3+）**: 依赖阶段 2 完成
  - 之后可并行（如团队容量允许）
  - 或按优先级顺序（P1 → P2 → P3）
- **打磨（最终阶段）**: 依赖所有所需用户故事完成

### 用户故事依赖

- **用户故事 1（P1）**: 阶段 2 完成后可开始 - 无其他故事依赖
- **用户故事 2（P2）**: 阶段 2 完成后可开始 - 可与 US1 集成但须独立可测
- **用户故事 3（P3）**: 阶段 2 完成后可开始 - 可与 US1/US2 集成但须独立可测

### 每个用户故事内部

- 若包含测试，必须先写并确认失败
- 先模型后服务
- 先服务后接口
- 先核心实现后集成
- 故事完成后再进入下一优先级

### 可并行机会

- 标记为 [P] 的初始化任务可并行
- 标记为 [P] 的基础设施任务可并行（阶段 2 内）
- 阶段 2 完成后，用户故事可并行（视团队容量）
- 标记为 [P] 的测试任务可并行
- 故事内标记为 [P] 的模型可并行
- 不同用户故事可由不同成员并行推进

---

## 并行示例：用户故事 1

```bash
# 并行启动用户故事 1 的所有测试（如需要）:
任务: "在 tests/contract/test_[name].py 为 [endpoint] 编写契约测试"
任务: "在 tests/integration/test_[name].py 为 [用户旅程] 编写集成测试"

# 并行启动用户故事 1 的所有模型:
任务: "在 src/models/[entity1].py 创建 [Entity1] 模型"
任务: "在 src/models/[entity2].py 创建 [Entity2] 模型"
```

---

## 实施策略

### MVP 优先（最小可行产品，仅用户故事 1）

1. 完成阶段 1：初始化
2. 完成阶段 2：基础设施（关键 - 阻塞）
3. 完成阶段 3：用户故事 1
4. **停止并验证**：独立测试用户故事 1
5. 需要时部署/演示

### 增量交付

1. 完成初始化 + 基础设施 → 基础完成
2. 增加用户故事 1 → 独立测试 → 部署/演示（MVP，最小可行产品）
3. 增加用户故事 2 → 独立测试 → 部署/演示
4. 增加用户故事 3 → 独立测试 → 部署/演示
5. 每个故事新增价值且不破坏已交付内容

### 团队并行策略

多开发者协作时：

1. 团队共同完成初始化 + 基础设施
2. 基础设施完成后：
   - 开发者 A：用户故事 1
   - 开发者 B：用户故事 2
   - 开发者 C：用户故事 3
3. 各故事独立完成并集成

---

## 备注

- [P] 任务 = 不同文件，无依赖
- [Story] 标签用于追踪用户故事
- 每个用户故事必须可独立完成与验证
- 若包含测试，必须先写并确认失败
- 每次代码变更必须更新 `changelog.md` 并提交对应 commit
- 避免：模糊任务、文件冲突、破坏独立性的跨故事依赖
