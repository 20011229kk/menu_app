<view class="container">
  <view class="card">
    <view class="section-title">ä»Šæ—¥å°å¨æˆ¿ ğŸ“</view>
    <view class="muted">æ¸©é¦¨æ•´ç†ä¸æœ€è¿‘æ›´æ–°ä¸€çœ¼å¯è§</view>
  </view>

  <view class="segmented">
    <view
      class="segmented-button {{view === 'category' ? 'segmented-active' : ''}}"
      data-view="category"
      bindtap="switchView"
    >æŒ‰åˆ†ç±»</view>
    <view
      class="segmented-button {{view === 'recent' ? 'segmented-active' : ''}}"
      data-view="recent"
      bindtap="switchView"
    >æœ€è¿‘æ›´æ–°</view>
  </view>

  <view wx:if="{{view === 'category'}}" class="stack">
    <view wx:if="{{categories.length === 0}}" class="card empty-card">
      <van-empty description="è¿˜æ²¡æœ‰åˆ†ç±»ï¼Œå…ˆå»åˆ†ç±»é¡µåˆ›å»ºã€‚" />
    </view>
    <view class="card" wx:for="{{categories}}" wx:key="id">
      <view class="row">
        <view class="section-title">{{item.name}}</view>
        <view class="badge">{{categoryCounts[item.id] || 0}}</view>
      </view>
      <view class="muted">{{categoryCounts[item.id] || 0}} é“èœ</view>
      <van-button size="small" type="default" bind:tap="goToDishes">æŸ¥çœ‹èœå“</van-button>
    </view>
  </view>

  <view wx:if="{{view === 'recent'}}" class="stack">
    <view wx:if="{{recentDishes.length === 0}}" class="card">
      <van-empty description="æš‚æ— æ›´æ–°è®°å½•" />
    </view>
    <view class="card" wx:for="{{recentDishes}}" wx:key="id">
      <view class="section-title">{{item.name}}</view>
      <view class="muted">{{item.description || 'æš‚æ— ç®€ä»‹'}}</view>
      <van-button size="small" type="default" data-id="{{item.id}}" bind:tap="goToDishDetail">æŸ¥çœ‹è¯¦æƒ…</van-button>
    </view>
  </view>
</view>

<view wx:if="{{softToastVisible}}" class="soft-toast">{{softToastText}}</view>
