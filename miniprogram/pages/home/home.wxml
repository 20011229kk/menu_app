<view class="container">
  <view class="card">
    <view class="section-title">首页</view>
    <view class="muted">分类概览与最近更新视图</view>
  </view>

  <view class="card">
    <view class="section-title">快捷入口</view>
    <view class="row">
      <view class="button-ghost" bindtap="goToCategories">分类</view>
      <view class="button-ghost" bindtap="goToDishes">菜品</view>
      <view class="button-ghost" bindtap="goToMenus">菜单</view>
      <view class="button-ghost" bindtap="goToSettings">设置</view>
    </view>
  </view>

  <view class="segmented">
    <view
      class="segmented-button {{view === 'category' ? 'segmented-active' : ''}}"
      data-view="category"
      bindtap="switchView"
    >按分类</view>
    <view
      class="segmented-button {{view === 'recent' ? 'segmented-active' : ''}}"
      data-view="recent"
      bindtap="switchView"
    >最近更新</view>
  </view>

  <view wx:if="{{view === 'category'}}" class="stack">
    <view class="card" wx:for="{{categories}}" wx:key="id">
      <view class="row">
        <view class="section-title">{{item.name}}</view>
        <view class="badge">{{categoryCounts[item.id] || 0}}</view>
      </view>
      <view class="muted">{{categoryCounts[item.id] || 0}} 道菜</view>
      <view class="button-ghost" bindtap="goToDishes">查看菜品</view>
    </view>
    <view class="card">
      <view class="row">
        <view class="section-title">未分类</view>
        <view class="badge">{{categoryCounts.uncategorized || 0}}</view>
      </view>
      <view class="muted">{{categoryCounts.uncategorized || 0}} 道菜</view>
      <view class="button-ghost" bindtap="goToDishes">查看菜品</view>
    </view>
  </view>

  <view wx:if="{{view === 'recent'}}" class="stack">
    <view wx:if="{{recentDishes.length === 0}}" class="card">
      <view class="muted">暂无更新记录</view>
    </view>
    <view class="card" wx:for="{{recentDishes}}" wx:key="id">
      <view class="section-title">{{item.name}}</view>
      <view class="muted">{{item.description || '暂无简介'}}</view>
      <view class="button-ghost" data-id="{{item.id}}" bindtap="goToDishDetail">查看详情</view>
    </view>
  </view>
</view>
